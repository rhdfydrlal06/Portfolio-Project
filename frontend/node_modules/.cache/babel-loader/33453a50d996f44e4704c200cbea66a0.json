{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/gmlwo/Desktop/\\uACF0\\uB3CC\\uD76C/\\uCDE8\\uBF40/elice/\\uD504\\uB85C\\uC81D\\uD2B8/portfolio-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/gmlwo/Desktop/\\uACF0\\uB3CC\\uD76C/\\uCDE8\\uBF40/elice/\\uD504\\uB85C\\uC81D\\uD2B8/portfolio-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/gmlwo/Desktop/\\uACF0\\uB3CC\\uD76C/\\uCDE8\\uBF40/elice/\\uD504\\uB85C\\uC81D\\uD2B8/portfolio-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import{useHistory}from'react-router-dom';import{BACKEND_URL}from\"../Env\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var setSessionId=_ref.setSessionId;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var history=useHistory();var requestLogin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,user_id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(BACKEND_URL+'/auth/login',{email:email,password:password});case 3:res=_context.sent;user_id=res.data.data.user_data.id;setSessionId(user_id);window.sessionStorage.setItem(\"id\",user_id);history.push(\"/\");_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function requestLogin(){return _ref2.apply(this,arguments);};}();var handleLoginSubmit=function handleLoginSubmit(e){e.preventDefault();requestLogin();};return/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"main\",{className:\"form-signin\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleLoginSubmit(e);},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-3 fw-normal\",children:\"Please login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"floatingInput\",placeholder:\"name@example.com\",onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingInput\",children:\"Email address\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"floatingPassword\",placeholder:\"Password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingPassword\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"w-100 btn btn-lg btn-secondary\",type:\"submit\",children:\"Sign in\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"w-100 btn btn-lg btn-light\",onClick:function onClick(){return history.push(\"/signup\");},children:\"\\uD68C\\uC6D0\\uAC00\\uC785\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-5 mb-3 text-muted\",children:\"\\xA9 2021 RacerIn Co. all rights reserved.\"})]})})});};export default Login;","map":{"version":3,"sources":["C:/Users/gmlwo/Desktop/곰돌희/취뽀/elice/프로젝트/portfolio-project/frontend/src/pages/Login.js"],"names":["React","useState","axios","useHistory","BACKEND_URL","Login","setSessionId","email","setEmail","password","setPassword","history","requestLogin","post","res","user_id","data","user_data","id","window","sessionStorage","setItem","push","console","log","handleLoginSubmit","e","preventDefault","target","value"],"mappings":"krBAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAAQC,WAAR,KAA0B,QAA1B,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAsB,IAAnBC,CAAAA,YAAmB,MAAnBA,YAAmB,eACNL,QAAQ,CAAC,EAAD,CADF,wCACzBM,KADyB,eAClBC,QADkB,8BAEAP,QAAQ,CAAC,EAAD,CAFR,yCAEzBQ,QAFyB,eAEfC,WAFe,eAGhC,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CAEA,GAAMS,CAAAA,YAAY,2FAAG,yLAEKV,CAAAA,KAAK,CAACW,IAAN,CACdT,WAAW,CAAG,aADA,CAEd,CAAEG,KAAK,CAALA,KAAF,CAASE,QAAQ,CAARA,QAAT,CAFc,CAFL,QAEPK,GAFO,eAMPC,OANO,CAMGD,GAAG,CAACE,IAAJ,CAASA,IAAT,CAAcC,SAAd,CAAwBC,EAN3B,CAObZ,YAAY,CAACS,OAAD,CAAZ,CACAI,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,IAA9B,CAAoCN,OAApC,EACAJ,OAAO,CAACW,IAAR,CAAa,GAAb,EATa,iFAWbC,OAAO,CAACC,GAAR,cAXa,qEAAH,kBAAZZ,CAAAA,YAAY,2CAAlB,CAeA,GAAMa,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,CAAD,CAAO,CAC7BA,CAAC,CAACC,cAAF,GACAf,YAAY,GACf,CAHD,CAKI,mBACI,YAAK,SAAS,CAAC,aAAf,uBACI,aAAM,SAAS,CAAC,aAAhB,uBACI,cAAM,QAAQ,CAAE,kBAAAc,CAAC,QAAGD,CAAAA,iBAAiB,CAACC,CAAD,CAApB,EAAjB,wBACI,WAAI,SAAS,CAAC,mBAAd,0BADJ,cAEI,aAAK,SAAS,CAAC,eAAf,wBACI,cAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAC,cAA9B,CAA6C,EAAE,CAAC,eAAhD,CAAgE,WAAW,CAAC,kBAA5E,CAA+F,QAAQ,CAAE,kBAAAA,CAAC,QAAIlB,CAAAA,QAAQ,CAACkB,CAAC,CAACE,MAAF,CAASC,KAAV,CAAZ,EAA1G,EADJ,cAEI,cAAO,OAAO,CAAC,eAAf,2BAFJ,GAFJ,cAMI,aAAK,SAAS,CAAC,eAAf,wBACI,cAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,cAAjC,CAAgD,EAAE,CAAC,kBAAnD,CAAsE,WAAW,CAAC,UAAlF,CAA6F,QAAQ,CAAE,kBAAAH,CAAC,QAAIhB,CAAAA,WAAW,CAACgB,CAAC,CAACE,MAAF,CAASC,KAAV,CAAf,EAAxG,EADJ,cAEI,cAAO,OAAO,CAAC,kBAAf,sBAFJ,GANJ,cAUI,eAAQ,SAAS,CAAC,gCAAlB,CAAmD,IAAI,CAAC,QAAxD,qBAVJ,cAWI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,4BAAhC,CAA6D,OAAO,CAAE,yBAAMlB,CAAAA,OAAO,CAACW,IAAR,CAAa,SAAb,CAAN,EAAtE,kDAXJ,cAYI,UAAG,SAAS,CAAC,sBAAb,wDAZJ,GADJ,EADJ,EADJ,CAoBP,CA7CD,CA+CA,cAAejB,CAAAA,KAAf","sourcesContent":["import React, {useState} from 'react';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router-dom';\r\nimport {BACKEND_URL} from \"../Env\";\r\n\r\nconst Login = ({ setSessionId }) => {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const history = useHistory();\r\n    \r\n    const requestLogin = async () => {\r\n        try {\r\n            const res = await axios.post(\r\n                BACKEND_URL + '/auth/login',\r\n                { email, password }\r\n            );\r\n            const user_id = res.data.data.user_data.id;\r\n            setSessionId(user_id);\r\n            window.sessionStorage.setItem(\"id\", user_id);\r\n            history.push(\"/\");\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    const handleLoginSubmit = (e) => {\r\n        e.preventDefault();\r\n        requestLogin();\r\n    }\r\n\r\n        return (\r\n            <div className=\"text-center\">\r\n                <main className=\"form-signin\">\r\n                    <form onSubmit={e =>handleLoginSubmit(e)}>\r\n                        <h1 className=\"h3 mb-3 fw-normal\">Please login</h1>\r\n                        <div className=\"form-floating\">\r\n                            <input type=\"email\" className=\"form-control\" id=\"floatingInput\" placeholder=\"name@example.com\" onChange={e => setEmail(e.target.value)} />\r\n                            <label htmlFor=\"floatingInput\">Email address</label>\r\n                        </div>\r\n                        <div className=\"form-floating\">\r\n                            <input type=\"password\" className=\"form-control\" id=\"floatingPassword\" placeholder=\"Password\" onChange={e => setPassword(e.target.value)} />\r\n                            <label htmlFor=\"floatingPassword\">Password</label>\r\n                        </div>\r\n                        <button className=\"w-100 btn btn-lg btn-secondary\" type=\"submit\">Sign in</button>\r\n                        <button type=\"button\" className=\"w-100 btn btn-lg btn-light\" onClick={() => history.push(\"/signup\")}>회원가입하기</button>\r\n                        <p className=\"mt-5 mb-3 text-muted\">&copy; 2021 RacerIn Co. all rights reserved.</p>\r\n                    </form>\r\n                </main>\r\n            </div>\r\n        );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}