{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/gmlwo/Desktop/\\uACF0\\uB3CC\\uD76C/\\uCDE8\\uBF40/elice/\\uD504\\uB85C\\uC81D\\uD2B8/portfolio-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/gmlwo/Desktop/\\uACF0\\uB3CC\\uD76C/\\uCDE8\\uBF40/elice/\\uD504\\uB85C\\uC81D\\uD2B8/portfolio-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/gmlwo/Desktop/\\uACF0\\uB3CC\\uD76C/\\uCDE8\\uBF40/elice/\\uD504\\uB85C\\uC81D\\uD2B8/portfolio-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from\"axios\";import{BACKEND_URL}from\"../../Env\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditSchool=function EditSchool(_ref){var data=_ref.data,setEditSchool=_ref.setEditSchool,isClicked=_ref.isClicked,sessionId=_ref.sessionId,setSchoolData=_ref.setSchoolData;var _useState=useState(data.name),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(data.major),_useState4=_slicedToArray(_useState3,2),major=_useState4[0],setMajor=_useState4[1];var _useState5=useState(data.status),_useState6=_slicedToArray(_useState5,2),status=_useState6[0],setStatus=_useState6[1];var school_id=data.id;var requestSaveSchool=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(BACKEND_URL+'/edit/school',{name:name,major:major,status:status,school_id:school_id});case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return function requestSaveSchool(){return _ref2.apply(this,arguments);};}();var requestDeleteSchool=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var res,_data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();e.stopPropagation();_context2.prev=2;_context2.next=5;return axios.post(BACKEND_URL+'/delete/school',{school_id:school_id});case 5:_context2.next=7;return axios.post(BACKEND_URL+'/portfolio/main/schools',{sessionId:sessionId});case 7:res=_context2.sent;_data=res.data.data.schools;setSchoolData(_data);_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[2,12]]);}));return function requestDeleteSchool(_x){return _ref3.apply(this,arguments);};}();if(isClicked){setEditSchool(false);requestSaveSchool();}return/*#__PURE__*/_jsxs(\"main\",{className:\"form-input\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"\\uD559\\uAD50\\uC774\\uB984\",defaultValue:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingInput\",children:\"\\uD559\\uAD50\\uC774\\uB984\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"\\uC804\\uACF5\",defaultValue:major,onChange:function onChange(e){return setMajor(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingInput\",children:\"\\uC804\\uACF5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"\\uC0C1\\uD0DC\",defaultValue:status,onChange:function onChange(e){return setStatus(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingInput\",children:\"\\uC0C1\\uD0DC\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",role:\"group\",\"aria-label\":\"Basic outlined example\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",onClick:requestDeleteSchool,type:\"button\",children:\"\\uC0AD\\uC81C\"})})]});};var Schools=function Schools(_ref4){var schoolData=_ref4.schoolData,editSchool=_ref4.editSchool,setEditSchool=_ref4.setEditSchool,handleEditSchools=_ref4.handleEditSchools,isClicked=_ref4.isClicked,setIsClicked=_ref4.setIsClicked,setSchoolData=_ref4.setSchoolData,sessionId=_ref4.sessionId;var handleSchoolSubmit=function handleSchoolSubmit(e){e.preventDefault();e.stopPropagation();setIsClicked(function(prevState){return!prevState;});};var requestAddSchool=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var res,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();e.stopPropagation();_context3.next=4;return axios.post(BACKEND_URL+'/add/school',{sessionId:sessionId});case 4:_context3.next=6;return axios.post(BACKEND_URL+'/portfolio/main/schools',{sessionId:sessionId});case 6:res=_context3.sent;data=res.data.data.schools;setSchoolData(data);case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function requestAddSchool(_x2){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"school-portfolio\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD559\\uB825\"}),editSchool?Array.from(schoolData).map(function(school){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(EditSchool,{data:school,setEditSchool:setEditSchool,isClicked:isClicked,setSchoolData:setSchoolData,sessionId:sessionId})},\"school_\".concat(school.id,\"_edit\"));}):Array.from(schoolData).map(function(school){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:school.name}),/*#__PURE__*/_jsx(\"h6\",{children:school.major}),/*#__PURE__*/_jsx(\"p\",{children:school.status})]},\"school_\".concat(school.id,\"_read\"));}),editSchool?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",role:\"group\",\"aria-label\":\"Basic outlined example\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",onClick:requestAddSchool,type:\"button\",children:\"\\uCD94\\uAC00\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",role:\"group\",\"aria-label\":\"Basic outlined example\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",onClick:handleSchoolSubmit,type:\"submit\",children:\"\\uC644\\uB8CC\"})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",role:\"group\",\"aria-label\":\"Basic outlined example\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",onClick:handleEditSchools,type:\"button\",children:\"\\uC218\\uC815\"})})]});};export default Schools;","map":{"version":3,"sources":["C:/Users/gmlwo/Desktop/곰돌희/취뽀/elice/프로젝트/portfolio-project/frontend/src/components/portfolio/Schools.js"],"names":["React","useState","axios","BACKEND_URL","EditSchool","data","setEditSchool","isClicked","sessionId","setSchoolData","name","setName","major","setMajor","status","setStatus","school_id","id","requestSaveSchool","post","console","log","requestDeleteSchool","e","preventDefault","stopPropagation","res","schools","target","value","Schools","schoolData","editSchool","handleEditSchools","setIsClicked","handleSchoolSubmit","prevState","requestAddSchool","Array","from","map","school"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport axios from \"axios\";\r\nimport {BACKEND_URL} from \"../../Env\";\r\n\r\nconst EditSchool = ({ data, setEditSchool, isClicked, sessionId, setSchoolData }) => {\r\n    const [name, setName]       = useState(data.name);\r\n    const [major,setMajor]      = useState(data.major);\r\n    const [status, setStatus]   = useState(data.status);\r\n    const school_id             = data.id;\r\n\r\n    const requestSaveSchool = async () => {\r\n        try {\r\n            await axios.post(\r\n                BACKEND_URL + '/edit/school',\r\n                { name, major, status, school_id }\r\n            );\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    const requestDeleteSchool = async (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        try {\r\n            await axios.post(\r\n                BACKEND_URL + '/delete/school',\r\n                { school_id }\r\n            );\r\n            const res = await axios.post(BACKEND_URL + '/portfolio/main/schools', {sessionId});\r\n            const data = res.data.data.schools;\r\n            setSchoolData(data);\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n\r\n    if (isClicked){\r\n        setEditSchool(false);\r\n        requestSaveSchool();\r\n    }\r\n\r\n    return (\r\n        <main className=\"form-input\">\r\n            <div className=\"form-floating\">\r\n                <input type=\"text\" className=\"form-control\"  placeholder=\"학교이름\" defaultValue={name} onChange={e => setName(e.target.value)} />\r\n                <label htmlFor=\"floatingInput\">학교이름</label>\r\n            </div>\r\n            <div className=\"form-floating\">\r\n                <input type=\"text\" className=\"form-control\" placeholder=\"전공\" defaultValue={major} onChange={e => setMajor(e.target.value)} />\r\n                <label htmlFor=\"floatingInput\">전공</label>\r\n            </div>\r\n            <div className=\"form-floating\">\r\n                <input type=\"text\" className=\"form-control\" placeholder=\"상태\" defaultValue={status} onChange={e => setStatus(e.target.value)} />\r\n                <label htmlFor=\"floatingInput\">상태</label>\r\n            </div>\r\n            <div className=\"btn-group\" role=\"group\" aria-label=\"Basic outlined example\">\r\n                <button className=\"btn btn-outline-primary\" onClick={requestDeleteSchool} type=\"button\">삭제</button>\r\n            </div>\r\n        </main>\r\n    );\r\n    \r\n}\r\nconst Schools = ({ schoolData, editSchool, setEditSchool, handleEditSchools, isClicked, setIsClicked, setSchoolData, sessionId  }) => {\r\n    const handleSchoolSubmit = (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsClicked(prevState => (!prevState));\r\n    }\r\n    const requestAddSchool = async (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        await axios.post(BACKEND_URL + '/add/school', {sessionId});\r\n        const res = await axios.post(BACKEND_URL + '/portfolio/main/schools', {sessionId});\r\n            const data = res.data.data.schools;\r\n            setSchoolData(data);\r\n        \r\n    }\r\n    return (\r\n        <div className=\"school-portfolio\">\r\n            <h3>학력</h3>\r\n            {\r\n                editSchool ?\r\n                Array.from(schoolData).map(school => {\r\n                    return (\r\n                        <div key={`school_${school.id}_edit`}>\r\n                            <EditSchool data={school} setEditSchool={setEditSchool} isClicked={isClicked} setSchoolData={setSchoolData} sessionId={sessionId}  />\r\n                        </div>\r\n                    )\r\n                }) : \r\n                Array.from(schoolData).map(school => {\r\n                    return (\r\n                        <div key={`school_${school.id}_read`}>\r\n                            <h5>{school.name}</h5>\r\n                            <h6>{school.major}</h6>\r\n                            <p>{school.status}</p>\r\n                        </div>\r\n                        \r\n                    )\r\n                })\r\n            }\r\n            {\r\n                editSchool ?\r\n                    <div>\r\n                        <div className=\"btn-group\" role=\"group\" aria-label=\"Basic outlined example\">\r\n                            <button className=\"btn btn-outline-primary\" onClick={requestAddSchool} type=\"button\">추가</button>\r\n                        </div>\r\n                        <div className=\"btn-group\" role=\"group\" aria-label=\"Basic outlined example\">\r\n                            <button className=\"btn btn-outline-primary\" onClick={handleSchoolSubmit} type=\"submit\">완료</button>\r\n                        </div>\r\n                    </div> :\r\n                    <div className=\"btn-group\" role=\"group\" aria-label=\"Basic outlined example\">\r\n                        <button className=\"btn btn-outline-primary\" onClick={handleEditSchools} type=\"button\">수정</button>\r\n                    </div>\r\n            }\r\n        </div>\r\n    );\r\n    \r\n}\r\n\r\nexport default Schools;"]},"metadata":{},"sourceType":"module"}